{"version":3,"names":["_ezyClient","_interopRequireDefault","require","_reactNative","obj","__esModule","default","EzyClientProxy","NativeModules","EzyClients","constructor","clients","defaultClientName","addEventListeners","getInstance","instance","newClient","config","callback","EzyClient","client","addClient","name","newDefaultClient","getClient","clientName","getDefaultClient","Platform","OS","clientEmitter","NativeEventEmitter","addListener","params","eventType","data","handleEvent","command","handleData","DeviceEventEmitter","_default","exports"],"sources":["ezy-clients.js"],"sourcesContent":["import EzyClient from './ezy-client';\nimport {\n    DeviceEventEmitter,\n    NativeEventEmitter,\n    Platform,\n    NativeModules,\n} from 'react-native';\n\nconst { EzyClientProxy } = NativeModules;\n\nclass EzyClients {\n    constructor() {\n        this.clients = {};\n        this.defaultClientName = '';\n        this.addEventListeners();\n    }\n\n    static getInstance() {\n        if (!EzyClients.instance) {\n            EzyClients.instance = new EzyClients();\n        }\n        return EzyClients.instance;\n    }\n\n    newClient(config, callback) {\n        new EzyClient(config, (client) => {\n            this.addClient(client);\n            if (this.defaultClientName === '')\n                this.defaultClientName = client.name;\n            if (callback) callback(client);\n        });\n    }\n\n    newDefaultClient(config, callback) {\n        this.newClient(config, (client) => {\n            this.defaultClientName = client.name;\n            if (callback) callback(client);\n        });\n    }\n\n    addClient(client) {\n        this.clients[client.name] = client;\n    }\n\n    getClient(clientName) {\n        return this.clients[clientName];\n    }\n\n    getDefaultClient() {\n        return this.clients[this.defaultClientName];\n    }\n\n    addEventListeners() {\n        if (Platform.OS === 'ios') {\n            const clientEmitter = new NativeEventEmitter(EzyClientProxy);\n            clientEmitter.addListener('ezy.event', (params) => {\n                var client = this.getClient(params.clientName);\n                var eventType = params.eventType;\n                var data = params.data;\n                client.handleEvent(eventType, data);\n            });\n            clientEmitter.addListener('ezy.data', (params) => {\n                var client = this.getClient(params.clientName);\n                var command = params.command;\n                var data = params.data;\n                client.handleData(command, data);\n            });\n        } else {\n            DeviceEventEmitter.addListener('ezy.event', (params) => {\n                var client = this.getClient(params.clientName);\n                var eventType = params.eventType;\n                var data = params.data;\n                client.handleEvent(eventType, data);\n            });\n            DeviceEventEmitter.addListener('ezy.data', (params) => {\n                var client = this.getClient(params.clientName);\n                var command = params.command;\n                var data = params.data;\n                client.handleData(command, data);\n            });\n        }\n    }\n}\n\nexport default EzyClients;\n"],"mappings":"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"}