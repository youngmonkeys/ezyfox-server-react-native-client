{"version":3,"names":["EzyClient","DeviceEventEmitter","NativeEventEmitter","Platform","NativeModules","EzyClientProxy","EzyClients","constructor","clients","defaultClientName","addEventListeners","getInstance","instance","newClient","config","callback","client","addClient","name","newDefaultClient","getClient","clientName","getDefaultClient","OS","clientEmitter","addListener","params","eventType","data","handleEvent","command","handleData"],"sources":["ezy-clients.js"],"sourcesContent":["import EzyClient from './ezy-client';\nimport {\n    DeviceEventEmitter,\n    NativeEventEmitter,\n    Platform,\n    NativeModules,\n} from 'react-native';\n\nconst { EzyClientProxy } = NativeModules;\n\nclass EzyClients {\n    constructor() {\n        this.clients = {};\n        this.defaultClientName = '';\n        this.addEventListeners();\n    }\n\n    static getInstance() {\n        if (!EzyClients.instance) {\n            EzyClients.instance = new EzyClients();\n        }\n        return EzyClients.instance;\n    }\n\n    newClient(config, callback) {\n        new EzyClient(config, (client) => {\n            this.addClient(client);\n            if (this.defaultClientName === '')\n                this.defaultClientName = client.name;\n            if (callback) callback(client);\n        });\n    }\n\n    newDefaultClient(config, callback) {\n        this.newClient(config, (client) => {\n            this.defaultClientName = client.name;\n            if (callback) callback(client);\n        });\n    }\n\n    addClient(client) {\n        this.clients[client.name] = client;\n    }\n\n    getClient(clientName) {\n        return this.clients[clientName];\n    }\n\n    getDefaultClient() {\n        return this.clients[this.defaultClientName];\n    }\n\n    addEventListeners() {\n        if (Platform.OS === 'ios') {\n            const clientEmitter = new NativeEventEmitter(EzyClientProxy);\n            clientEmitter.addListener('ezy.event', (params) => {\n                var client = this.getClient(params.clientName);\n                var eventType = params.eventType;\n                var data = params.data;\n                client.handleEvent(eventType, data);\n            });\n            clientEmitter.addListener('ezy.data', (params) => {\n                var client = this.getClient(params.clientName);\n                var command = params.command;\n                var data = params.data;\n                client.handleData(command, data);\n            });\n        } else {\n            DeviceEventEmitter.addListener('ezy.event', (params) => {\n                var client = this.getClient(params.clientName);\n                var eventType = params.eventType;\n                var data = params.data;\n                client.handleEvent(eventType, data);\n            });\n            DeviceEventEmitter.addListener('ezy.data', (params) => {\n                var client = this.getClient(params.clientName);\n                var command = params.command;\n                var data = params.data;\n                client.handleData(command, data);\n            });\n        }\n    }\n}\n\nexport default EzyClients;\n"],"mappings":"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"}